#!/bin/bash

# Recreate the old MediaWiki based file structure and set it to redirect
# to the old homepage

defaultOldTarget="http://www.cometvisu.de/wiki/"
defaultNewTarget="/CometVisu/"
redirections=(
  "Abkuerzungen|"
  "Anpassung_der_Konfigurationsdateien|"
  "Benutzerhandbuch|"
  "Colorchooser_(Deutsch)|"
  "CometVisu|"
  "CometVisu/0.8.0/ColorChooser/de|"
  "CometVisu/0.8.0/Tutorial/Plugins/de|"
  "CometVisu/0.8.0/Tutorial/Stylings/de|"
  "CometVisu/0.8.0/Tutorial/de|"
  "CometVisu/0.8.0/demo_config/de|"
  "CometVisu/0.8.0/image/de|"
  "CometVisu/0.8.0/imagetrigger/de|"
  "CometVisu/0.8.0/info/de|"
  "CometVisu/0.8.0/info/de)|"
  "CometVisu/0.8.0/infotrigger/de|"
  "CometVisu/0.8.0/manual/de|"
  "CometVisu/0.8.0/mapping/de|"
  "CometVisu/0.8.0/multitrigger/de|"
  "CometVisu/0.8.0/pushbutton/de|"
  "CometVisu/0.8.0/slide/de|"
  "CometVisu/0.8.0/strftime/de|"
  "CometVisu/0.8.0/switch/de|"
  "CometVisu/0.8.0/text/de|"
  "CometVisu/0.8.0/the_internal_Editor/de|"
  "CometVisu/0.8.0/toggle/de|"
  "CometVisu/0.8.0/trigger/de|"
  "CometVisu/0.8.0/video/de|"
  "CometVisu/0.8.0/web/de|"
  "CometVisu/0.8.1/|"
  "CometVisu/0.8.1/etc/rrd/cpuload/de/|"
  "CometVisu/0.8.1/etc/rrd/de/|"
  "CometVisu/0.8.1/etc/rrd/processes/de/|"
  "CometVisu/0.8.1/etc/rrd/template|"
  "CometVisu/0.8.1/installation/de/pi|"
  "CometVisu/0.8.1/manual/de|"
  "CometVisu/0.8.x/Howto:_Animierter_Hydraulikplan|"
  "CometVisu/0.8.x/aufgaben/de|"
  "CometVisu/0.8.x/etc/rrd/1wire_owfs/temperatur/de/|"
  "CometVisu/0.8.x/etc/rrd/cpuload/de/|"
  "CometVisu/0.8.x/etc/rrd/de/|"
  "CometVisu/0.8.x/etc/rrd/ifHCoctets|"
  "CometVisu/0.8.x/etc/rrd/ifHCoctets/de|"
  "CometVisu/0.8.x/etc/rrd/knx_linknx/temperatur/de/|"
  "CometVisu/0.8.x/etc/rrd/pi_cputemp/de/|"
  "CometVisu/0.8.x/etc/rrd/processes/de/|"
  "CometVisu/0.8.x/etc/rrd/template|"
  "CometVisu/0.8.x/flavour/de|"
  "CometVisu/0.8.x/format/de|"
  "CometVisu/0.8.x/installation/de/pi|"
  "CometVisu/0.8.x/manual/de|"
  "CometVisu/0.8.x/manual/updateother/de|"
  "CometVisu/0.8.x/manual/updatewiregate/de|"
  "CometVisu/0.8.x/mapping/de|"
  "CometVisu/0.8.x/styling/de|"
  "CometVisu/0.8.x/widgets/audio/de|"
  "CometVisu/0.8.x/widgets/break/de/|"
  "CometVisu/0.8.x/widgets/colorchooser/de/|"
  "CometVisu/0.8.x/widgets/de|"
  "CometVisu/0.8.x/widgets/designtoggle/de/|"
  "CometVisu/0.8.x/widgets/diagramm_info/de/|"
  "CometVisu/0.8.x/widgets/gauge/de/|"
  "CometVisu/0.8.x/widgets/image/de/|"
  "CometVisu/0.8.x/widgets/imagetrigger/de/|"
  "CometVisu/0.8.x/widgets/info/de/|"
  "CometVisu/0.8.x/widgets/infotrigger/de/|"
  "CometVisu/0.8.x/widgets/line/de|"
  "CometVisu/0.8.x/widgets/multitrigger/de/|"
  "CometVisu/0.8.x/widgets/page/de|"
  "CometVisu/0.8.x/widgets/pushbutton/de/|"
  "CometVisu/0.8.x/widgets/refresh/de/|"
  "CometVisu/0.8.x/widgets/reload/de/|"
  "CometVisu/0.8.x/widgets/rgb/de/|"
  "CometVisu/0.8.x/widgets/slide/de/|"
  "CometVisu/0.8.x/widgets/strftime/|"
  "CometVisu/0.8.x/widgets/switch/de/|"
  "CometVisu/0.8.x/widgets/template|"
  "CometVisu/0.8.x/widgets/text/de/|"
  "CometVisu/0.8.x/widgets/toggle/de/|"
  "CometVisu/0.8.x/widgets/trigger/de/|"
  "CometVisu/0.8.x/widgets/video/de/|"
  "CometVisu/0.8.x/widgets/vorlage/de|"
  "CometVisu/0.8.x/widgets/web/de/|"
  "CometVisu/Abkuerzungen|"
  "CometVisu/Anpassung_der_Konfigurationsdateien|"
  "CometVisu/Backend/en|"
  "CometVisu/Benutzerhandbuch|"
  "CometVisu/Beta|"
  "CometVisu/CodingStyle|"
  "CometVisu/ColorChooser|"
  "CometVisu/ColorChooser_(Deutsch)|"
  "CometVisu/Config|"
  "CometVisu/Den_eingebauten_Editor_benutzen|"
  "CometVisu/DesignDecisions|"
  "CometVisu/Devoloping_Widgets_(Deutsch)|"
  "CometVisu/Examples|"
  "CometVisu/Extending|"
  "CometVisu/FAQ_(Deutsch)|"
  "CometVisu/Format|de/manual/config/format.html"
  "CometVisu/Format_(Deutsch)|de/manual/config/format.html"
  "CometVisu/HowTo:_Entwicklerversion_auf_dem_WireGate|"
  "CometVisu/HowTo_install_the_development_version_on_the_WireGate|"
  "CometVisu/Iframe|"
  "CometVisu/Iframe_(Deutsch)|"
  "CometVisu/Install|"
  "CometVisu/Install_Wiregate|"
  "CometVisu/Install_from_Source|"
  "CometVisu/Install_prerequisites|"
  "CometVisu/Install_prerequitisites|"
  "CometVisu/Installation/Backend/de|"
  "CometVisu/Installation/Backend/en|"
  "CometVisu/Installation/Pi/de|"
  "CometVisu/Installation/RRDtool/en|"
  "CometVisu/Installation/Raspberry_Pi/de|"
  "CometVisu/Installation/WireGate/de|"
  "CometVisu/Installation/WireGate/en|"
  "CometVisu/Installation/de|"
  "CometVisu/Installation/en|"
  "CometVisu/Manual|"
  "CometVisu/Overview|"
  "CometVisu/Protocol|"
  "CometVisu/Protokoll_(Deutsch)|"
  "CometVisu/The_internal_Editor|"
  "CometVisu/URL_parameter/de|"
  "CometVisu/Update|"
  "CometVisu/Widget/ColorChooser/de|"
  "CometVisu/Widget/ColorChooser/en|"
  "CometVisu/Widget/Iframe/de|"
  "CometVisu/Widget/Iframe/en|"
  "CometVisu/Widget/diagram_inline/de|"
  "CometVisu/Widget/diagram_inline/en|"
  "CometVisu/Widget/diagram_popup/de|"
  "CometVisu/Widget/diagram_popup/en|"
  "CometVisu/Widget/image/de|"
  "CometVisu/Widget/image/en|"
  "CometVisu/Widget/info/de|"
  "CometVisu/Widget/info/en|"
  "CometVisu/Widget/infotrigger/de|"
  "CometVisu/Widget/infotrigger/en|"
  "CometVisu/Widget/multitrigger/de|"
  "CometVisu/Widget/multitrigger/en|"
  "CometVisu/Widget/slide/de|"
  "CometVisu/Widget/slide/en|"
  "CometVisu/Widget/switch/de|"
  "CometVisu/Widget/switch/en|"
  "CometVisu/Widget/toggle/de|"
  "CometVisu/Widget/toggle/en|"
  "CometVisu/Widget/trigger/de|"
  "CometVisu/Widget/trigger/en|"
  "CometVisu/Widget/video/de|"
  "CometVisu/Widget/video/en|"
  "CometVisu/XML-Elemente|"
  "CometVisu/XML-Elements|"
  "CometVisu/demo_config/de|"
  "CometVisu/demo_config/haegar80/de|"
  "CometVisu/demo_config/merlin123/de|"
  "CometVisu/demo_config/swiss/de|"
  "CometVisu/diagram_inline|"
  "CometVisu/diagram_inline_(Deutsch)|"
  "CometVisu/diagram_popup|"
  "CometVisu/diagram_popup_(Deutsch)|"
  "CometVisu/gweather_(Deutsch)|"
  "CometVisu/handbook/de|"
  "CometVisu/image|"
  "CometVisu/image_(Deutsch)|"
  "CometVisu/imagetrigger/de|"
  "CometVisu/imagetrigger_(Deutsch)|"
  "CometVisu/info|"
  "CometVisu/info_(Deutsch)|"
  "CometVisu/infotrigger|"
  "CometVisu/infotrigger_(Deutsch)|"
  "CometVisu/jqclock_(Deutsch)|"
  "CometVisu/manual/de|"
  "CometVisu/manual/en|"
  "CometVisu/mapping|"
  "CometVisu/mapping_(Deutsch)|"
  "CometVisu/multitrigger|"
  "CometVisu/multitrigger_(Deutsch)|"
  "CometVisu/rrdtool|"
  "CometVisu/slide|"
  "CometVisu/slide_(Deutsch)|"
  "CometVisu/slider_(Deutsch)|"
  "CometVisu/strftime/de|"
  "CometVisu/strftime_(Deutsch)|"
  "CometVisu/styling_(Deutsch)|"
  "CometVisu/switch|"
  "CometVisu/switch_(Deutsch)|"
  "CometVisu/test/1|"
  "CometVisu/test/2|"
  "CometVisu/test/3|"
  "CometVisu/the_internal_Editor/de|"
  "CometVisu/the_internal_Editor/en|"
  "CometVisu/toggle|"
  "CometVisu/toggle_(Deutsch)|"
  "CometVisu/trigger|"
  "CometVisu/trigger_(Deutsch)|"
  "CometVisu/video|"
  "CometVisu/video_(Deutsch)|"
  "CometVisu/widgets%26plugins|"
  "CometVisu​/XML-Elements|"
  "CometVisu​/styling|"
  "Den_eingebauten_Editor_benutzen|"
  "Ebusd|"
  "Freeware|"
  "GPL|"
  "GrAF|"
  "HowTo_Neue_Widgets_von_Hand_installieren|"
  "Iframe|"
  "Impressum|"
  "Index.php|"
  "JavaScript_3D_Floorplan|"
  "JavaScript_3D_Floorplan/de|"
  "JavaScript_3D_Floorplan/en|"
  "KNX|"
  "KNX_Visu|"
  "KNX_Visualisation|"
  "KNX_Visualisierung|"
  "Knxd|"
  "LGconnectd|"
  "Labor_(Deutsch)|"
  "LogicEngine|"
  "Main_Page|"
  "Media|"
  "NewPage|"
  "Open_Automation|"
  "Rsslog|"
  "Russconnectd|"
  "Tools|"
  "XML-Elemente|"
  "XPL|"
  "XPLHAL|"
  "Yawgd|"
)

for redirection in "${redirections[@]}" ; do
  source="${redirection%%|*}"
  target="${redirection##*|}"
  if [ x$target = x ]
  then
    target=$defaultOldTarget$source
  else
    target=$defaultNewTarget$target
  fi
  
  mkdir -p "wiki/$source"
  echo "---
layout: redirected
sitemap: false
redirect_to: $target
---
" > "wiki/$source/index.md"
done